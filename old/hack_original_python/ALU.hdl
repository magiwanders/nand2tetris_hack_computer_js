CHIP ALU {
    IN
        x[16], y[16],  
        zx, 
        nx, 
        zy, 
        ny, 
        f,  
        no; 

    OUT
        out[16], 
        zr, 
        ng; 

    PARTS:
    Mux16(a[15:0]=x[15:0], b[15:0]=false[15:0], sel=zx, out[15:0]=zxout[15:0]);
    Mux16(a[15:0]=y[15:0], b[15:0]=false[15:0], sel=zy, out[15:0]=zyout[15:0]);

    Not16(in[15:0]=zxout[15:0], out[15:0]=notzxout[15:0]);
    Not16(in[15:0]=zyout[15:0], out[15:0]=notzyout[15:0]);
    Mux16(a[15:0]=zxout[15:0], b[15:0]=notzxout[15:0], sel=nx, out[15:0]=zxnxout[15:0]);
    Mux16(a[15:0]=zyout[15:0], b[15:0]=notzyout[15:0], sel=ny, out[15:0]=zynyout[15:0]);

    Add16(a[15:0]=zxnxout[15:0], b[15:0]=zynyout[15:0], out[15:0]=xplusy[15:0]);
    And16(a[15:0]=zxnxout[15:0], b[15:0]=zynyout[15:0], out[15:0]=xandy[15:0]);
    Mux16(a[15:0]=xandy[15:0], b[15:0]=xplusy[15:0], sel=f, out[15:0]=outf[15:0]);

    Not16(in[15:0]=outf[15:0], out[15:0]=notoutf[15:0]);
    Mux16(a[15:0]=outf[15:0], b[15:0]=notoutf[15:0], sel=no, out[15:0]=out1[15:0]);

    And16(a[15:0]=out1[15:0], b[15:0]=true[15:0], out[15:0]=out[15:0]);
    And(a=true, b=out[15], out=ng);
    Or16Way(in[15:0]=out[15:0], out = nzr);
    Not(in=nzr, out=zr)

} TEST {
|        x         |        y         |zx |nx |zy |ny | f |no |       out        |zr |ng || Passed | out[15] | out[14] | out[13] | out[12] | out[11] | out[10] | out[9] | out[8] | out[7] | out[6] | out[5] | out[4] | out[3] | out[2] | out[1] | out[0] | zr | ng | 
| 0000000000000000 | 1111111111111111 | 1 | 0 | 1 | 0 | 1 | 0 | 0000000000000000 | 1 | 0 ||   Y
| 0000000000000000 | 1111111111111111 | 1 | 1 | 1 | 1 | 1 | 1 | 0000000000000001 | 0 | 0 ||   Y
| 0000000000000000 | 1111111111111111 | 1 | 1 | 1 | 0 | 1 | 0 | 1111111111111111 | 0 | 1 ||   Y
| 0000000000000000 | 1111111111111111 | 0 | 0 | 1 | 1 | 0 | 0 | 0000000000000000 | 1 | 0 ||   Y
| 0000000000000000 | 1111111111111111 | 1 | 1 | 0 | 0 | 0 | 0 | 1111111111111111 | 0 | 1 ||   Y
| 0000000000000000 | 1111111111111111 | 0 | 0 | 1 | 1 | 0 | 1 | 1111111111111111 | 0 | 1 ||   Y
| 0000000000000000 | 1111111111111111 | 1 | 1 | 0 | 0 | 0 | 1 | 0000000000000000 | 1 | 0 ||   Y
| 0000000000000000 | 1111111111111111 | 0 | 0 | 1 | 1 | 1 | 1 | 0000000000000000 | 1 | 0 ||   Y
| 0000000000000000 | 1111111111111111 | 1 | 1 | 0 | 0 | 1 | 1 | 0000000000000001 | 0 | 0 ||   Y
| 0000000000000000 | 1111111111111111 | 0 | 1 | 1 | 1 | 1 | 1 | 0000000000000001 | 0 | 0 ||   Y
| 0000000000000000 | 1111111111111111 | 1 | 1 | 0 | 1 | 1 | 1 | 0000000000000000 | 1 | 0 ||   Y
| 0000000000000000 | 1111111111111111 | 0 | 0 | 1 | 1 | 1 | 0 | 1111111111111111 | 0 | 1 ||   Y
| 0000000000000000 | 1111111111111111 | 1 | 1 | 0 | 0 | 1 | 0 | 1111111111111110 | 0 | 1 ||   Y
| 0000000000000000 | 1111111111111111 | 0 | 0 | 0 | 0 | 1 | 0 | 1111111111111111 | 0 | 1 ||   Y
| 0000000000000000 | 1111111111111111 | 0 | 1 | 0 | 0 | 1 | 1 | 0000000000000001 | 0 | 0 ||   Y
| 0000000000000000 | 1111111111111111 | 0 | 0 | 0 | 1 | 1 | 1 | 1111111111111111 | 0 | 1 ||   Y
| 0000000000000000 | 1111111111111111 | 0 | 0 | 0 | 0 | 0 | 0 | 0000000000000000 | 1 | 0 ||   Y
| 0000000000000000 | 1111111111111111 | 0 | 1 | 0 | 1 | 0 | 1 | 1111111111111111 | 0 | 1 ||   Y
| 0000000000010001 | 0000000000000011 | 1 | 0 | 1 | 0 | 1 | 0 | 0000000000000000 | 1 | 0 ||   Y
| 0000000000010001 | 0000000000000011 | 1 | 1 | 1 | 1 | 1 | 1 | 0000000000000001 | 0 | 0 ||   Y
| 0000000000010001 | 0000000000000011 | 1 | 1 | 1 | 0 | 1 | 0 | 1111111111111111 | 0 | 1 ||   Y
| 0000000000010001 | 0000000000000011 | 0 | 0 | 1 | 1 | 0 | 0 | 0000000000010001 | 0 | 0 ||   Y
| 0000000000010001 | 0000000000000011 | 1 | 1 | 0 | 0 | 0 | 0 | 0000000000000011 | 0 | 0 ||   Y
| 0000000000010001 | 0000000000000011 | 0 | 0 | 1 | 1 | 0 | 1 | 1111111111101110 | 0 | 1 ||   Y
| 0000000000010001 | 0000000000000011 | 1 | 1 | 0 | 0 | 0 | 1 | 1111111111111100 | 0 | 1 ||   Y
| 0000000000010001 | 0000000000000011 | 0 | 0 | 1 | 1 | 1 | 1 | 1111111111101111 | 0 | 1 ||   Y
| 0000000000010001 | 0000000000000011 | 1 | 1 | 0 | 0 | 1 | 1 | 1111111111111101 | 0 | 1 ||   Y
| 0000000000010001 | 0000000000000011 | 0 | 1 | 1 | 1 | 1 | 1 | 0000000000010010 | 0 | 0 ||   Y
| 0000000000010001 | 0000000000000011 | 1 | 1 | 0 | 1 | 1 | 1 | 0000000000000100 | 0 | 0 ||   Y
| 0000000000010001 | 0000000000000011 | 0 | 0 | 1 | 1 | 1 | 0 | 0000000000010000 | 0 | 0 ||   Y
| 0000000000010001 | 0000000000000011 | 1 | 1 | 0 | 0 | 1 | 0 | 0000000000000010 | 0 | 0 ||   Y
| 0000000000010001 | 0000000000000011 | 0 | 0 | 0 | 0 | 1 | 0 | 0000000000010100 | 0 | 0 ||   Y
| 0000000000010001 | 0000000000000011 | 0 | 1 | 0 | 0 | 1 | 1 | 0000000000001110 | 0 | 0 ||   Y
| 0000000000010001 | 0000000000000011 | 0 | 0 | 0 | 1 | 1 | 1 | 1111111111110010 | 0 | 1 ||   Y
| 0000000000010001 | 0000000000000011 | 0 | 0 | 0 | 0 | 0 | 0 | 0000000000000001 | 0 | 0 ||   Y
| 0000000000010001 | 0000000000000011 | 0 | 1 | 0 | 1 | 0 | 1 | 0000000000010011 | 0 | 0 ||   Y
}